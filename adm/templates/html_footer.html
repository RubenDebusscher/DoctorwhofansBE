<script>
  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("change", function(event) {
        if (event.target.name.includes("ValidationRuleID")) {
            var row = event.target.closest("tr"); // Get current row
            var fieldInput = row.querySelector("[name*='AttributeValue']");

            if (!fieldInput) return;

            var validationRuleID = event.target.value;

            fetch("?action=get_validation_type&rule_id=" + validationRuleID)
                .then(response => response.json())
                .then(data => {
                    var inputType = data.type || "text";
                    fieldInput.setAttribute("type", inputType);
                })
                .catch(error => console.error("Error fetching validation type:", error));
        }
    });
});
  </script>